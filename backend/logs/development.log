
> backend@1.0.0 start
> node -r dotenv/config server.js

[dotenv@17.2.0] injecting env (0) from .env (tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild)
[dotenv@17.2.0] injecting env (0) from .env (tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`)
(node:14129) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:14129) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
MongoDB Connected: shulacluster-shard-00-01.ged8w.mongodb.net
Backend server started on port 5002
üîÑ WebSocket service initialized
Client connected
Authentication error: invalid signature
Client connected
Authentication error: invalid signature
Client connected
Authentication error: invalid signature
Client connected
Authentication error: invalid signature
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T14:53:40.349Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T14:53:41.797Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T14:53:42.593Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T14:53:43.554Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T14:53:47.921Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T14:53:49.017Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T14:53:49.881Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T14:53:50.690Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T14:55:05.304Z
Route: /api/users/membership/688219c5e4922c700fb82bd2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T14:55:05.778Z
Route: /api/users/membership/688219c5e4922c700fb82bd2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T14:59:29.788Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:02:20.758Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:02:21.980Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:02:22.945Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:02:24.874Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:03:10.459Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:03:13.724Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:03:14.549Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:03:15.164Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:03:16.821Z
Route: /api/users/membership/688219c5e4922c700fb82bd2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:03:17.321Z
Route: /api/users/membership/688219c5e4922c700fb82bd2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:04:27.551Z
Route: /api/users/membership/6881693da63abe81b10f9158
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:04:28.562Z
Route: /api/users/membership/6881693da63abe81b10f9158
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
Client connected
Client connected
User authenticated via WebSocket
User authenticated via WebSocket
User authenticated via WebSocket
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:14:34.819Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:14:35.760Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:14:36.665Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:14:37.752Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:16:01.623Z
Route: /api/admin/orders/68823eef92e0f07961701a07/confirm-return
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:16:02.968Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:17:20.988Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:17:23.362Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:17:25.644Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:17:26.405Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:17:28.056Z
Route: /api/users/membership/688219c5e4922c700fb82bd2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:17:28.533Z
Route: /api/users/membership/688219c5e4922c700fb82bd2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:18:27.618Z
Route: /api/carts/add
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:18:30.992Z
Route: /api/carts/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:18:31.609Z
Route: /api/carts/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:19:00.124Z
Route: /api/orders/user/68824eadea7c7b6d510704f2?limit=1
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:19:01.598Z
Route: /api/orders/user/68824eadea7c7b6d510704f2?limit=1
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:19:01.599Z
Route: /api/carts/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:19:02.422Z
Route: /api/orders/user/68824eadea7c7b6d510704f2?limit=10&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:19:02.423Z
Route: /api/carts/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:19:03.000Z
Route: /api/orders/user/68824eadea7c7b6d510704f2?limit=10&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:19:51.552Z
Route: /api/uploads/signature
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Successfully uploaded to GCS: https://storage.googleapis.com/shula_admin/signatures/1753370391558_signature.png
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:20:03.779Z
Route: /api/uploads/id-document
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Successfully uploaded to GCS: https://storage.googleapis.com/shula_admin/id-documents/1753370403781_Screenshot 2025-07-23 at 20.28.47.png
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:20:09.440Z
Route: /api/orders
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Order creation request: {
  userId: new ObjectId('68824eadea7c7b6d510704f2'),
  itemsCount: 1,
  hasCustomerInfo: true
}
Creating comprehensive order with full checkout data
Comprehensive order created successfully: new ObjectId('68824f29ea7c7b6d51070548')
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:20:10.368Z
Route: /api/users/68824eadea7c7b6d510704f2/process-membership
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:20:10.990Z
Route: /api/carts/clear/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ Cleared 1 cart items for user 68824eadea7c7b6d510704f2
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:20:21.981Z
Route: /api/users/profile?page=1&limit=5
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:20:22.961Z
Route: /api/users/profile?page=1&limit=5
Decoded Token User: { id: '68824eadea7c7b6d510704f2', role: 'customer' }
User from DB: {
  _id: '68824eadea7c7b6d510704f2',
  email: 'munia@shoula.com',
  role: 'customer'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
‚úÖ CORS allowed origin: http://localhost:3000
Client disconnected
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
Client connected
User authenticated via WebSocket
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:21:58.500Z
Route: /api/users?limit=1
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:21:59.087Z
Route: /api/users?limit=1
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:22:10.498Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:22:11.486Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:22:12.270Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:22:13.280Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:22:38.756Z
Route: /api/admin/orders/68824f29ea7c7b6d51070548
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:22:40.283Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:23:41.863Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:23:42.486Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:24:32.665Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:24:53.652Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:25:26.660Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:26:46.301Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:26:47.374Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:26:48.164Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:26:49.218Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:27:05.154Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:27:05.544Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:31:34.823Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:31:35.784Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:31:36.756Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:31:37.831Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:31:41.139Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:31:41.490Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:32:39.429Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:32:39.874Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:32:51.541Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:32:52.978Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:32:53.859Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:32:54.851Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:32:58.885Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:32:59.236Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:33:05.713Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:33:06.298Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:33:06.892Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:33:08.009Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:33:10.180Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:33:10.560Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:34:39.771Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:34:40.678Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:34:41.370Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:34:42.317Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:35:09.170Z
Route: /api/admin/orders/68824f29ea7c7b6d51070548/confirm-pickup
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:35:10.284Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:35:25.532Z
Route: /api/admin/orders?page=1&limit=12&status=ongoing&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:36:38.972Z
Route: /api/admin/orders/68824f29ea7c7b6d51070548/confirm-return
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:36:40.109Z
Route: /api/admin/orders?page=1&limit=12&status=ongoing&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:36:45.415Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:37:30.321Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:37:30.683Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:37:37.083Z
Route: /api/users/membership/verify-id
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:37:37.681Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:37:38.245Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:44:44.273Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:44:45.227Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:44:45.996Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:44:46.979Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:45:12.594Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:45:13.251Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:45:50.181Z
Route: /api/admin/orders?page=1&limit=12&status=Pending&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:45:50.868Z
Route: /api/admin/orders?page=1&limit=12&status=Accepted&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:45:56.500Z
Route: /api/admin/orders?page=1&limit=12&status=ongoing&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:46:00.401Z
Route: /api/users/membership/68364da815e53bea3b7430e3
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:46:00.763Z
Route: /api/users/membership/68364da815e53bea3b7430e3
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:46:52.904Z
Route: /api/users/membership/68364da815e53bea3b7430e3
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:46:53.357Z
Route: /api/users/membership/68364da815e53bea3b7430e3
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:47:01.034Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:47:05.085Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:47:05.670Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:49:52.002Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:49:52.999Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:49:53.756Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:49:54.493Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:52:22.608Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:52:23.239Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:52:24.083Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:52:24.671Z
Route: /api/users?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:52:26.879Z
Route: /api/users/membership/688219c5e4922c700fb82bd2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:52:27.346Z
Route: /api/users/membership/688219c5e4922c700fb82bd2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:14.972Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:15.965Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:16.721Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:17.768Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:18.578Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:19.532Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:20.374Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:21.761Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:22.334Z
Route: /api/users/membership/68824eadea7c7b6d510704f2
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:29.877Z
Route: /api/admin/orders?page=1&limit=12&status=ongoing&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:33.131Z
Route: /api/users/membership/68364da815e53bea3b7430e3
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:56:33.527Z
Route: /api/users/membership/68364da815e53bea3b7430e3
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:59:33.335Z
Route: /api/users/membership/68364d9915e53bea3b7430a7
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T15:59:33.727Z
Route: /api/users/membership/68364d9915e53bea3b7430a7
Decoded Token User: { id: '68364d8715e53bea3b74305d', role: 'staff' }
User from DB: {
  _id: '68364d8715e53bea3b74305d',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'customer', 'staff' ]
Has Role: true
--- END DEBUG LOG ---
Client connected
User authenticated via WebSocket
Client disconnected
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
Client disconnected
Client disconnected
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
Client connected
User authenticated via WebSocket
Client connected
User authenticated via WebSocket
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T16:09:33.576Z
Route: /api/users?limit=1
Decoded Token User: { id: '68825a1bd28f75825ce6c8e7', role: 'staff' }
User from DB: {
  _id: '68825a1bd28f75825ce6c8e7',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T16:09:35.580Z
Route: /api/users?limit=1
Decoded Token User: { id: '68825a1bd28f75825ce6c8e7', role: 'staff' }
User from DB: {
  _id: '68825a1bd28f75825ce6c8e7',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
--- AUTHORIZE MIDDLEWARE DEBUG ---
Timestamp: 2025-07-24T16:09:39.657Z
Route: /api/admin/orders?page=1&limit=12&sortBy=createdAt&sortOrder=desc
Decoded Token User: { id: '68825a1bd28f75825ce6c8e7', role: 'staff' }
User from DB: {
  _id: '68825a1bd28f75825ce6c8e7',
  email: 'einat@shula.com',
  role: 'staff'
}
Required Roles: [ 'staff' ]
Has Role: true
--- END DEBUG LOG ---
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
‚úÖ CORS allowed origin: http://localhost:3000
